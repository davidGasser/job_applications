{% extends "base_fullwidth.html" %}

{% block title %}Kanban Board - {{ super() }}{% endblock %}

{% block head %}
<style>
    .kanban-container {
        padding: 1rem;
        display: flex;
        flex-direction: column;
        height: 100%;
        box-sizing: border-box;
    }
    .kanban-board {
        display: flex;
        gap: 1rem;
        flex-grow: 1;
        overflow-x: auto;
    }
    .kanban-column {
        flex: 1;
        min-width: 320px;
        max-width: 320px;
        background-color: var(--header-background);
        border-radius: 6px;
        display: flex;
        flex-direction: column;
    }
    .kanban-column h2 {
        margin: 0;
        font-size: 1.2rem;
        color: var(--text-color);
        padding: 1rem;
        border-bottom: 1px solid var(--border-color);
        flex-shrink: 0;
    }
    .kanban-cards {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        padding: 1rem;
        overflow-y: auto;
        flex-grow: 1;
    }
    .kanban-card {
        background-color: var(--background-color);
        border: 1px solid var(--border-color);
        border-radius: 6px;
        padding: 1rem;
        cursor: grab;
    }
    .kanban-card:active {
        cursor: grabbing;
        background-color: #010409;
    }
    .kanban-card h3 {
        margin: 0 0 0.5rem 0;
        font-size: 1rem;
    }
    .kanban-card p {
        margin: 0;
        font-size: 0.9rem;
        color: #8b949e;
    }
</style>
{% endblock %}

{% block content %}
    <div class="kanban-container">
        <h1>Job Application Kanban Board</h1>
        <div class="kanban-board">
            {% for status in statuses %}
            <div class="kanban-column" data-status="{{ status }}">
                <h2>{{ status }}</h2>
                <div class="kanban-cards">
                    {% for job in jobs %}
                        {% if job.status == status %}
                        <div class="kanban-card" draggable="true" data-job-id="{{ job.id }}">
                            <h3>{{ job.title }}</h3>
                            <p>{{ job.company }}</p>
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
